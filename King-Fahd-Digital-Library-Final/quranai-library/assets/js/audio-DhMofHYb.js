import{r as _,g as $}from"./vendor-BP0qhIbX.js";var M={exports:{}},b={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R;function F(){if(R)return b;R=1;var o=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function d(x,t,u){var v=null;if(u!==void 0&&(v=""+u),t.key!==void 0&&(v=""+t.key),"key"in t){u={};for(var i in t)i!=="key"&&(u[i]=t[i])}else u=t;return t=u.ref,{$$typeof:o,type:x,key:v,ref:t!==void 0?t:null,props:u}}return b.Fragment=l,b.jsx=d,b.jsxs=d,b}var P;function q(){return P||(P=1,M.exports=F()),M.exports}var e=q(),n=_();const A=$(n),J=({currentTrack:o,isPlaying:l,onPlay:d,onPause:x,onNext:t,onPrevious:u,onClose:v,progress:i,duration:f,volume:p,onVolumeChange:k})=>{const[a,g]=n.useState(!1),[N,w]=n.useState(!1),r=h=>{const y=Math.floor(h/60),C=Math.floor(h%60);return`${y}:${C.toString().padStart(2,"0")}`};return o?e.jsx("div",{className:`fixed bottom-4 right-4 z-50 transition-all duration-300 ${a?"w-16 h-16":"w-80"}`,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-brand-green to-brand-green-dark p-3 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"جاري التشغيل"})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("button",{onClick:()=>g(!a),className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4":"M20 12l-4-4v8l4-4zM6 12l4-4v8l-4-4z"})})}),e.jsx("button",{onClick:v,className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("img",{src:o.coverUrl,alt:o.title,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:o.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:o.language})]})]})}),e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse text-xs text-gray-500",children:[e.jsx("span",{children:r(i)}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-brand-green h-1 rounded-full transition-all duration-300",style:{width:`${f>0?i/f*100:0}%`}})}),e.jsx("span",{children:r(f)})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("button",{onClick:u,className:"p-2 text-gray-600 hover:text-brand-green transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z"})})}),e.jsx("button",{onClick:l?x:d,className:"p-3 bg-brand-green text-white rounded-full hover:bg-brand-green-dark transition-colors",children:l?e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-brand-green transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798l-5.445-3.63z"})})})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("button",{onClick:()=>w(!N),className:"p-2 text-gray-600 hover:text-brand-green transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.792L4.383 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.383l4-3.208a1 1 0 011.617.792zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}),N&&e.jsxs("div",{className:"absolute bottom-16 right-0 bg-white rounded-lg shadow-lg p-3 border",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:h=>k(Number(h.target.value)),className:"w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:[p,"%"]})]})]})]})})]})]})}):null},W=({isOpen:o,onClose:l,playlist:d,currentTrack:x,onSelectTrack:t,onRemoveTrack:u,onClearPlaylist:v})=>o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-brand-green to-brand-green-dark p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"قائمة التشغيل"}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("button",{onClick:v,className:"px-3 py-1 bg-white/20 rounded text-sm hover:bg-white/30 transition-colors",children:"مسح الكل"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),e.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),e.jsx("p",{className:"text-lg font-medium",children:"قائمة التشغيل فارغة"}),e.jsx("p",{className:"text-sm",children:"اضغط على أي مقطع صوتي لإضافته إلى قائمة التشغيل"})]}):e.jsx("div",{className:"space-y-2",children:d.map((i,f)=>e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-3 rounded-lg transition-colors cursor-pointer ${(x==null?void 0:x.id)===i.id?"bg-brand-green/10 border border-brand-green/20":"hover:bg-gray-50"}`,onClick:()=>t(i),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:i.coverUrl,alt:i.title,className:"w-12 h-12 rounded-lg object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:i.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:i.language})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(x==null?void 0:x.id)===i.id&&e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-brand-green rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-brand-green font-medium",children:"جاري التشغيل"})]}),e.jsx("button",{onClick:p=>{p.stopPropagation(),u(i.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},i.id))})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["إجمالي المقاطع: ",d.length]}),e.jsxs("span",{children:["المدة الإجمالية: ",Math.floor(d.length*3.5)," دقيقة"]})]})})]})}):null,D=({children:o})=>{const[l,d]=n.useState(null),[x,t]=n.useState(!1),[u,v]=n.useState(0),[i,f]=n.useState(0),[p,k]=n.useState(50),[a,g]=n.useState([]),[N,w]=n.useState(!1),r=n.useRef(null);n.useEffect(()=>{r.current||(r.current=new Audio,r.current.preload="metadata");const s=r.current,c=()=>{f(s.duration||0)},m=()=>{v(s.currentTime)},j=()=>{t(!1),E()},L=()=>{console.error("Error playing audio"),t(!1)};return s.addEventListener("loadedmetadata",c),s.addEventListener("timeupdate",m),s.addEventListener("ended",j),s.addEventListener("error",L),()=>{s.removeEventListener("loadedmetadata",c),s.removeEventListener("timeupdate",m),s.removeEventListener("ended",j),s.removeEventListener("error",L)}},[]),n.useEffect(()=>{r.current&&(r.current.volume=p/100)},[p]);const h=n.useCallback(s=>{r.current&&(d(s),a.find(c=>c.id===s.id)||g(c=>[...c,s]),r.current.src=s.downloadUrl,r.current.load(),r.current.play().then(()=>{t(!0)}).catch(c=>{console.error("Error playing audio:",c),t(!1)}))},[a]),y=n.useCallback(()=>{r.current&&(r.current.pause(),t(!1))},[]),C=n.useCallback(()=>{r.current&&r.current.play().then(()=>{t(!0)}).catch(s=>{console.error("Error playing audio:",s),t(!1)})},[]),E=n.useCallback(()=>{if(!l||a.length===0)return;const c=(a.findIndex(j=>j.id===l.id)+1)%a.length,m=a[c];m&&h(m)},[l,a,h]),S=n.useCallback(()=>{if(!l||a.length===0)return;const s=a.findIndex(j=>j.id===l.id),c=s===0?a.length-1:s-1,m=a[c];m&&h(m)},[l,a,h]),V=n.useCallback(s=>{g(c=>c.filter(m=>m.id!==s)),(l==null?void 0:l.id)===s&&(r.current&&(r.current.pause(),r.current.src=""),d(null),t(!1))},[l]),B=n.useCallback(()=>{g([]),r.current&&(r.current.pause(),r.current.src=""),d(null),t(!1)},[]),I=n.useCallback(s=>{k(s)},[]),T={playTrack:h,pauseTrack:y,resumeTrack:C,currentTrack:l,isPlaying:x,playlist:a,showPlaylist:()=>w(!0)};return e.jsx(z.Provider,{value:T,children:e.jsxs("div",{className:"relative",children:[o,e.jsx(J,{currentTrack:l,isPlaying:x,onPlay:C,onPause:y,onNext:E,onPrevious:S,onClose:()=>{r.current&&r.current.pause(),d(null),t(!1)},progress:u,duration:i,volume:p,onVolumeChange:I}),e.jsx(W,{isOpen:N,onClose:()=>w(!1),playlist:a,currentTrack:l,onSelectTrack:h,onRemoveTrack:V,onClearPlaylist:B})]})})},z=A.createContext(null),H=()=>{const o=A.useContext(z);return o||{playTrack:()=>{},pauseTrack:()=>{},resumeTrack:()=>{},currentTrack:null,isPlaying:!1,playlist:[],showPlaylist:()=>{}}};export{D as A,A as R,e as j,n as r,H as u};
