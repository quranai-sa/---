<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم المشرف - مكتبة مجمع الملك فهد الرقمية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #054231 0%, #0F745B 100%);
            min-height: 100vh;
        }
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        .admin-header {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .admin-title {
            color: #054231;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            background: #f0f0f0;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background: #054231;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .editor-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .section-title {
            color: #054231;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #054231;
        }
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            min-height: 120px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        .form-textarea:focus {
            outline: none;
            border-color: #054231;
        }
        .color-picker {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        .preview-section {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .preview-title {
            color: #054231;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .preview-frame {
            width: 100%;
            height: 600px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
        }
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #054231;
            color: white;
        }
        .btn-primary:hover {
            background: #0F745B;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn-secondary:hover {
            background: #5a6268;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-success:hover {
            background: #218838;
        }
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        .btn-warning:hover {
            background: #e0a800;
        }
        .status-message {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: none;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .element-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .element-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .element-card:hover {
            border-color: #054231;
            background: #f0f8f5;
        }
        .element-card.selected {
            border-color: #054231;
            background: #e8f5f0;
        }
        .element-title {
            font-weight: 600;
            color: #054231;
            margin-bottom: 0.5rem;
        }
        .element-desc {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <div class="admin-header">
            <h1 class="admin-title">لوحة تحكم المشرف</h1>
            <p>إدارة وتعديل محتوى مكتبة مجمع الملك فهد الرقمية</p>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="status-message"></div>

        <!-- Tabs -->
        <div class="admin-tabs">
            <button class="tab-button active" onclick="showTab('text-editor')">محرر النصوص</button>
            <button class="tab-button" onclick="showTab('design-editor')">محرر التصميم</button>
            <button class="tab-button" onclick="showTab('preview')">معاينة التغييرات</button>
            <button class="tab-button" onclick="showTab('settings')">الإعدادات</button>
        </div>

        <!-- Text Editor Tab -->
        <div id="text-editor" class="tab-content active">
            <div class="editor-section">
                <h2 class="section-title">محرر النصوص</h2>
                
                <!-- Element Selector -->
                <div class="element-selector">
                    <div class="element-card" onclick="selectElement('title')">
                        <div class="element-title">العنوان الرئيسي</div>
                        <div class="element-desc">عنوان الصفحة الرئيسية</div>
                    </div>
                    <div class="element-card" onclick="selectElement('subtitle')">
                        <div class="element-title">العنوان الفرعي</div>
                        <div class="element-desc">وصف المكتبة الرقمية</div>
                    </div>
                    <div class="element-card" onclick="selectElement('features')">
                        <div class="element-title">الميزات</div>
                        <div class="element-desc">قائمة ميزات المكتبة</div>
                    </div>
                    <div class="element-card" onclick="selectElement('contact')">
                        <div class="element-title">معلومات التواصل</div>
                        <div class="element-desc">العنوان، الهاتف، البريد الإلكتروني</div>
                    </div>
                    <div class="element-card" onclick="selectElement('social')">
                        <div class="element-title">وسائل التواصل الاجتماعي</div>
                        <div class="element-desc">روابط تويتر، فيسبوك، إنستغرام</div>
                    </div>
                    <div class="element-card" onclick="selectElement('statistics')">
                        <div class="element-title">الإحصائيات</div>
                        <div class="element-desc">عدد الإصدارات، اللغات، البلدان</div>
                    </div>
                    <div class="element-card" onclick="selectElement('footer')">
                        <div class="element-title">التذييل</div>
                        <div class="element-desc">نص التذييل</div>
                    </div>
                </div>

                <!-- Text Editor Form -->
                <div class="form-group">
                    <label class="form-label" for="textContent">المحتوى:</label>
                    <textarea id="textContent" class="form-textarea" placeholder="أدخل النص هنا..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="textStyle">نمط النص:</label>
                    <select id="textStyle" class="form-input">
                        <option value="normal">عادي</option>
                        <option value="bold">عريض</option>
                        <option value="italic">مائل</option>
                        <option value="underline">مسطر</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="textSize">حجم النص:</label>
                    <select id="textSize" class="form-input">
                        <option value="text-sm">صغير</option>
                        <option value="text-base">متوسط</option>
                        <option value="text-lg">كبير</option>
                        <option value="text-xl">كبير جداً</option>
                        <option value="text-2xl">ضخم</option>
                    </select>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="updateText()">تحديث النص</button>
                    <button class="btn btn-secondary" onclick="resetText()">إعادة تعيين</button>
                    <button class="btn btn-success" onclick="saveChanges()">حفظ التغييرات</button>
                </div>
            </div>
        </div>

        <!-- Design Editor Tab -->
        <div id="design-editor" class="tab-content">
            <div class="editor-section">
                <h2 class="section-title">محرر التصميم</h2>
                
                <div class="form-group">
                    <label class="form-label">الألوان الرئيسية:</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label>الأخضر الداكن:</label>
                            <input type="color" id="colorDarkGreen" class="color-picker" value="#054231">
                        </div>
                        <div>
                            <label>الأخضر الفاتح:</label>
                            <input type="color" id="colorLightGreen" class="color-picker" value="#0F745B">
                        </div>
                        <div>
                            <label>الذهبي:</label>
                            <input type="color" id="colorGold" class="color-picker" value="#C5A861">
                        </div>
                        <div>
                            <label>الخلفية:</label>
                            <input type="color" id="colorBg" class="color-picker" value="#F9F9F9">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="fontFamily">نوع الخط:</label>
                    <select id="fontFamily" class="form-input">
                        <option value="Cairo">Cairo</option>
                        <option value="Arial">Arial</option>
                        <option value="Tahoma">Tahoma</option>
                        <option value="Times New Roman">Times New Roman</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="layoutStyle">نمط التخطيط:</label>
                    <select id="layoutStyle" class="form-input">
                        <option value="grid">شبكة</option>
                        <option value="flex">مرن</option>
                        <option value="block">كتلة</option>
                    </select>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="updateDesign()">تحديث التصميم</button>
                    <button class="btn btn-secondary" onclick="resetDesign()">إعادة تعيين</button>
                    <button class="btn btn-success" onclick="saveDesign()">حفظ التصميم</button>
                </div>
            </div>
        </div>

        <!-- Preview Tab -->
        <div id="preview" class="tab-content">
            <div class="preview-section">
                <h2 class="preview-title">معاينة التغييرات</h2>
                <iframe id="previewFrame" class="preview-frame" src="index.html"></iframe>
                <div class="action-buttons">
                    <button class="btn btn-warning" onclick="refreshPreview()">تحديث المعاينة</button>
                    <button class="btn btn-success" onclick="publishChanges()">نشر التغييرات</button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="editor-section">
                <h2 class="section-title">إعدادات النظام</h2>
                
                <div class="form-group">
                    <label class="form-label" for="adminPassword">كلمة مرور المشرف:</label>
                    <input type="password" id="adminPassword" class="form-input" placeholder="أدخل كلمة المرور">
                </div>

                <div class="form-group">
                    <label class="form-label" for="backupFrequency">تكرار النسخ الاحتياطي:</label>
                    <select id="backupFrequency" class="form-input">
                        <option value="daily">يومي</option>
                        <option value="weekly">أسبوعي</option>
                        <option value="monthly">شهري</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="autoSave">الحفظ التلقائي:</label>
                    <input type="checkbox" id="autoSave" checked> تفعيل الحفظ التلقائي
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="saveSettings()">حفظ الإعدادات</button>
                    <button class="btn btn-warning" onclick="createBackup()">إنشاء نسخة احتياطية</button>
                    <button class="btn btn-secondary" onclick="restoreBackup()">استعادة نسخة احتياطية</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentElement = null;
        let changes = {};
        let autoSaveInterval;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadCurrentContent();
            startAutoSave();
        });

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Element selection
        function selectElement(elementType) {
            currentElement = elementType;
            
            // Update visual selection
            document.querySelectorAll('.element-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.element-card').classList.add('selected');

            // Load current content
            loadElementContent(elementType);
        }

        // Load current content
        function loadCurrentContent() {
            // This would load the current content from the main page
            // For now, we'll use placeholder content
            const contentMap = {
                'title': 'مجمع الملك فهد لطباعة المصحف الشريف - المكتبة الرقمية',
                'subtitle': 'المكتبة الرقمية الرسمية لمجمع الملك فهد لطباعة المصحف الشريف',
                'features': 'مكتبة رقمية شاملة، ترجمات متعددة، تفاسير معتمدة، تطبيقات رسمية',
                'footer': 'جميع الحقوق محفوظة لمجمع الملك فهد لطباعة المصحف الشريف'
            };

            if (currentElement && contentMap[currentElement]) {
                document.getElementById('textContent').value = contentMap[currentElement];
            }
        }

        // Load element content
        function loadElementContent(elementType) {
            // This would load the actual content from the main page
            // For demonstration, we'll use placeholder content
            const contentMap = {
                'title': 'مجمع الملك فهد لطباعة المصحف الشريف - المكتبة الرقمية',
                'subtitle': 'منصة رقمية للوصول إلى إصدارات المجمع الرقمية',
                'features': 'مكتبة رقمية شاملة، ترجمات متعددة، تفاسير معتمدة، تطبيقات رسمية، الإصدارات والكتب الصوتية، بحث، رواية',
                'contact': 'المدينة المنورة - المملكة العربية السعودية\n+966 14 832 0000\ninfo@qurancomplex.gov.sa\nhttps://qurancomplex.gov.sa',
                'social': 'تويتر: https://twitter.com/qurancomplex\nفيسبوك: https://facebook.com/qurancomplex\nإنستغرام: https://instagram.com/qurancomplex\nيوتيوب: https://youtube.com/qurancomplex',
                'statistics': '190,000+ إصدار، 100+ لغة، 4 قارات، 40+ سنة',
                'footer': 'جميع الحقوق محفوظة لمجمع الملك فهد لطباعة المصحف الشريف'
            };

            document.getElementById('textContent').value = contentMap[elementType] || '';
        }

        // Update text
        function updateText() {
            if (!currentElement) {
                showMessage('يرجى اختيار عنصر للتعديل', 'error');
                return;
            }

            const content = document.getElementById('textContent').value;
            const style = document.getElementById('textStyle').value;
            const size = document.getElementById('textSize').value;

            changes[currentElement] = {
                content: content,
                style: style,
                size: size,
                type: 'text'
            };

            showMessage('تم تحديث النص بنجاح', 'success');
            updatePreview();
        }

        // Update design
        function updateDesign() {
            const darkGreen = document.getElementById('colorDarkGreen').value;
            const lightGreen = document.getElementById('colorLightGreen').value;
            const gold = document.getElementById('colorGold').value;
            const bg = document.getElementById('colorBg').value;
            const fontFamily = document.getElementById('fontFamily').value;
            const layoutStyle = document.getElementById('layoutStyle').value;

            changes.design = {
                colors: {
                    darkGreen: darkGreen,
                    lightGreen: lightGreen,
                    gold: gold,
                    bg: bg
                },
                fontFamily: fontFamily,
                layoutStyle: layoutStyle,
                type: 'design'
            };

            showMessage('تم تحديث التصميم بنجاح', 'success');
            updatePreview();
        }

        // Reset text
        function resetText() {
            document.getElementById('textContent').value = '';
            document.getElementById('textStyle').value = 'normal';
            document.getElementById('textSize').value = 'text-base';
            showMessage('تم إعادة تعيين النص', 'success');
        }

        // Reset design
        function resetDesign() {
            document.getElementById('colorDarkGreen').value = '#054231';
            document.getElementById('colorLightGreen').value = '#0F745B';
            document.getElementById('colorGold').value = '#C5A861';
            document.getElementById('colorBg').value = '#F9F9F9';
            document.getElementById('fontFamily').value = 'Cairo';
            document.getElementById('layoutStyle').value = 'grid';
            showMessage('تم إعادة تعيين التصميم', 'success');
        }

        // Save changes
        function saveChanges() {
            // This would save changes to the actual files
            localStorage.setItem('adminChanges', JSON.stringify(changes));
            showMessage('تم حفظ التغييرات بنجاح', 'success');
        }

        // Save design
        function saveDesign() {
            saveChanges();
            showMessage('تم حفظ التصميم بنجاح', 'success');
        }

        // Update preview
        function updatePreview() {
            // This would update the preview iframe
            const iframe = document.getElementById('previewFrame');
            iframe.src = iframe.src;
        }

        // Refresh preview
        function refreshPreview() {
            const iframe = document.getElementById('previewFrame');
            iframe.src = 'index.html';
            showMessage('تم تحديث المعاينة', 'success');
        }

        // Publish changes
        function publishChanges() {
            // This would publish changes to the live site
            showMessage('تم نشر التغييرات بنجاح', 'success');
        }

        // Save settings
        function saveSettings() {
            const settings = {
                password: document.getElementById('adminPassword').value,
                backupFrequency: document.getElementById('backupFrequency').value,
                autoSave: document.getElementById('autoSave').checked
            };
            localStorage.setItem('adminSettings', JSON.stringify(settings));
            showMessage('تم حفظ الإعدادات بنجاح', 'success');
        }

        // Create backup
        function createBackup() {
            const backup = {
                changes: changes,
                timestamp: new Date().toISOString(),
                version: '1.0'
            };
            localStorage.setItem('adminBackup', JSON.stringify(backup));
            showMessage('تم إنشاء نسخة احتياطية بنجاح', 'success');
        }

        // Restore backup
        function restoreBackup() {
            const backup = localStorage.getItem('adminBackup');
            if (backup) {
                const backupData = JSON.parse(backup);
                changes = backupData.changes;
                showMessage('تم استعادة النسخة الاحتياطية بنجاح', 'success');
            } else {
                showMessage('لا توجد نسخة احتياطية', 'error');
            }
        }

        // Show message
        function showMessage(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.textContent = message;
            statusDiv.className = `status-message status-${type}`;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }

        // Auto save
        function startAutoSave() {
            if (document.getElementById('autoSave').checked) {
                autoSaveInterval = setInterval(() => {
                    if (Object.keys(changes).length > 0) {
                        saveChanges();
                    }
                }, 30000); // Auto save every 30 seconds
            }
        }

        // Load settings
        function loadSettings() {
            const settings = localStorage.getItem('adminSettings');
            if (settings) {
                const settingsData = JSON.parse(settings);
                document.getElementById('adminPassword').value = settingsData.password || '';
                document.getElementById('backupFrequency').value = settingsData.backupFrequency || 'daily';
                document.getElementById('autoSave').checked = settingsData.autoSave || false;
            }
        }
    </script>
</body>
</html>
